$(document).ready(function(){window.ZINDEX_COUNT=window.ZINDEX_COUNT||50001;JC.Tree.dataFilter=function(d){var e={};if(d){if(d.root.length>2){d.root.shift();e.root=d.root}e.data={};for(var a in d.data){e.data[a]=[];for(var c=0,b=d.data[a].length;c<b;c++){if(d.data[a][c].length<3){continue}d.data[a][c].shift();e.data[a].push(d.data[a][c])}}}return e};$(document).delegate("div.tree_container","click",function(a){a.stopPropagation()});$(document).on("click",function(){$("div.dpt-select-active").trigger("click")});$(document).delegate("div.dpt-select","click",function(b){b.stopPropagation();var a=$(this),e=$(a.attr("treenode"));var g=e.data("TreeIns");if(!a.hasClass("dpt-select-active")){$("div.dpt-select-active").trigger("click")}if(!g){var c=window[a.attr("treedata")];var f=new JC.Tree(e,c);f.on("click",function(){var h=$(this),j=h.attr("dataid"),i=h.attr("dataname");a.find("> span.label").html(i);a.find("> input[type=hidden]").val(j);a.trigger("click")});f.on("RenderLabel",function(i){var h=$(this);h.html(printf('<a href="javascript:" dataid="{0}">{1}</a>',i[0],i[1]))});f.init();f.open();var d=a.find("> input[type=hidden]").val();d&&f.open(d)}e.css({"z-index":ZINDEX_COUNT++});if(e.css("display")!="none"){a.removeClass("dpt-select-active");e.hide()}else{e.show();a.addClass("dpt-select-active");e.css({top:a.prop("offsetHeight")-2+"px",left:"-1px"})}})});