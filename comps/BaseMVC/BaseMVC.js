(function(a){window.JC&&(window.BaseMVC=JC.BaseMVC=b);function b(c){throw new Error("JC.BaseMVC is an abstract class, can't initialize!");if(b.getInstance(c)){return b.getInstance(c)}b.getInstance(c,this);this._model=new b.Model(c);this._view=new b.View(this._model);this._init()}b.prototype={_init:function(){var c=this;c._beforeInit();c._initHanlderEvent();a([c._view,c._model]).on("BindEvent",function(d,f,e){c.on(f,e)});a([c._view,c._model]).on("TriggerEvent",function(d,f){var e=sliceArgs(arguments).slice(2);c.trigger(f,e)});c._model.init();c._view&&c._view.init();c._inited();return c},_beforeInit:function(){},_initHanlderEvent:function(){},_inited:function(){},selector:function(){return this._model.selector()},on:function(d,c){a(this).on(d,c);return this},trigger:function(d,c){a(this).trigger(d,c);return this}};b.autoInit=true;b.build=function(c,d){b.buildModel(c);b.buildView(c);b.buildClass(b,c,d);b.buildClass(b.Model,c.Model);b.buildClass(b.View,c.View)};b.buildClass=function(c,d,h){if(!(c&&d)){return}var g,f,e;if(d){for(g in c){if(!d[g]){if(c[g].constructor==Function){}else{d[g]=c[g]}}}for(g in c.prototype){!d.prototype[g]&&(d.prototype[g]=c.prototype[g])}}};b.buildModel=function(c){!c.Model&&(c.Model=function(d){this._selector=d},c.Model._instanceName="CommonIns")};b.buildView=function(c){!c.View&&(c.View=function(d){this._model=d})};b.buildModel(b);b.Model._instanceName="BaseMVCIns";b.Model.prototype={init:function(){return this},selector:function(c){typeof c!="undefined"&&(this._selector=c);return this._selector},intProp:function(c,d){if(typeof d=="undefined"){d=c;c=this.selector()}else{c&&(c=a(c))}var e=0;c&&c.is("["+d+"]")&&(e=parseInt(c.attr(d).trim(),10)||e);return e},floatProp:function(c,d){if(typeof d=="undefined"){d=c;c=this.selector()}else{c&&(c=a(c))}var e=0;c&&c.is("["+d+"]")&&(e=parseFloat(c.attr(d).trim())||e);return e},stringProp:function(c,d){if(typeof d=="undefined"){d=c;c=this.selector()}else{c&&(c=a(c))}var e=(this.attrProp(c,d)||"").toLowerCase();return e},attrProp:function(c,d){if(typeof d=="undefined"){d=c;c=this.selector()}else{c&&(c=a(c))}var e="";c&&c.is("["+d+"]")&&(e=c.attr(d).trim());return e},boolProp:function(c,d,f){if(typeof d=="boolean"){f=d;d=c;c=this.selector()}else{if(typeof d=="undefined"){d=c;c=this.selector()}else{c&&(c=a(c))}}var e=undefined;c&&c.is("["+d+"]")&&(e=parseBool(c.attr(d).trim()));return e},callbackProp:function(c,e){if(typeof e=="undefined"){e=c;c=this.selector()}else{c&&(c=a(c))}var f,d;c&&c.is("["+e+"]")&&(d=window[c.attr(e)])&&(f=d);return f},selectorProp:function(c,d){var e;if(typeof d=="undefined"){d=c;c=this.selector()}else{c&&(c=a(c))}c&&c.is("["+d+"]")&&(e=parentSelector(c,c.attr(d)));return e},is:function(c,d){if(typeof d=="undefined"){d=c;c=this.selector()}else{c&&(c=a(c))}return c&&c.is(d)}};b.buildView(b);b.View.prototype={init:function(){return this}}}(jQuery));